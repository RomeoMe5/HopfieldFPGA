import math

#Нейронная сеть Хопфилда

#Кол-во нейронов - 9x9
N = 81

#Кол-во образов - 8
M = 8

#Отношение числа ключевых образов M, которые могут быть запомнены, к числу нейронов сети N
#8 / 81 = 0.099

#Символ для значения нейрона
S = {'-': -1, '1': 1}

#Матрица весовых коэффициентов
J = [[0, 1, 1, 1, 1, 1, 1, 1, 1],
     [1, 0, 1, 1, 1, 1, 1, 1, 1],
     [1, 1, 0, 1, 1, 1, 1, 1, 1],
     [1, 1, 1, 0, 1, 1, 1, 1, 1],
     [1, 1, 1, 1, 0, 1, 1, 1, 1],
     [1, 1, 1, 1, 1, 0, 1, 1, 1],
     [1, 1, 1, 1, 1, 1, 0, 1, 1],
     [1, 1, 1, 1, 1, 1, 1, 0, 1],
     [1, 1, 1, 1, 1, 1, 1, 1, 0]]

#Эталонные образы (8 шт.)
X = [['----1----', '---1-1---', '--1---1--', '-1-----1-', '1-------1', '1-------1', '111111111', '1-------1', '1-------1'], #А
     ['111111111', '1--------', '1--------', '1--------', '111111---', '1--------', '1--------', '1--------', '111111111'], #Е
     ['1-------1', '1------11', '1-----1-1', '1----1--1', '1---1---1', '1--1----1', '1-1-----1', '11------1', '1-------1'], #И
     ['1-------1', '1-------1', '1-------1', '1-------1', '111111111', '1-------1', '1-------1', '1-------1', '1-------1'], #Н
     ['111111111', '1-------1', '1-------1', '1-------1', '1-------1', '1-------1', '1-------1', '1-------1', '1-------1'], #П
     ['111111111', '1-------1', '1--------', '1--------', '1--------', '1--------', '1--------', '1-------1', '111111111'], #С
     ['111111111', '----1----', '----1----', '----1----', '----1----', '----1----', '----1----', '----1----', '----1----'], #Т
     ['-11111111', '1-------1', '1-------1', '1-------1', '-11111111', '---1----1', '--1-----1', '-1------1', '1-------1']] #Я

#Искаженный образ 'Т'
test_shape = ['1-111111-', '---------', '1----1---', '1--1-----', '----1--1-', '1--------', '------1--', '1---1----', '---1-----']

print('\n'.join(test_shape))

#print(S.get('-'))

#Обучение сети
for l in X:
    for b in l:
        for i in range(0, 9):
            for j in range(0, 9):
                if (i == j):
                    J[i][j] = 0
                else:
                    J[i][j] += S.get(b[i]) * S.get(b[j])

for i in J:
    print(i, end='\n')

#Запись в файл весовых коэффициентов
f = open('koef.txt', 'w')
for i in J:
    f.write(str(i) + '\n')
f.close()

#Распознавание образа
